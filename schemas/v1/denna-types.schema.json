{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "https://spec.denna.io/schemas/v1/denna-types.schema.json",
  "title": "Denna Spec Shared Type Definitions",
  "description": "Reusable type definitions for Denna Spec files. Import these via $ref in your domain schemas.",
  "$defs": {
    "address": {
      "type": "object",
      "required": ["value", "format"],
      "properties": {
        "value": {
          "type": "string",
          "minLength": 1,
          "description": "The address string in its native format."
        },
        "format": {
          "type": "string",
          "minLength": 1,
          "description": "The address format identifying the chain family. Known formats (evm, solana, cosmos, bitcoin, aptos, sui, tron) are pattern-validated. Custom formats are accepted without pattern enforcement."
        }
      },
      "additionalProperties": false,
      "allOf": [
        {
          "if": { "properties": { "format": { "const": "evm" } }, "required": ["format"] },
          "then": { "properties": { "value": { "pattern": "^0x[0-9a-fA-F]{40}$" } } }
        },
        {
          "if": { "properties": { "format": { "const": "solana" } }, "required": ["format"] },
          "then": { "properties": { "value": { "pattern": "^[1-9A-HJ-NP-Za-km-z]{32,44}$" } } }
        },
        {
          "if": { "properties": { "format": { "const": "cosmos" } }, "required": ["format"] },
          "then": { "properties": { "value": { "pattern": "^[a-z]{1,20}1[a-z0-9]{38,58}$" } } }
        },
        {
          "if": { "properties": { "format": { "const": "bitcoin" } }, "required": ["format"] },
          "then": { "properties": { "value": { "pattern": "^(1|3|bc1)[a-zA-HJ-NP-Z0-9]{25,62}$" } } }
        },
        {
          "if": { "properties": { "format": { "const": "aptos" } }, "required": ["format"] },
          "then": { "properties": { "value": { "pattern": "^0x[0-9a-f]{64}$" } } }
        },
        {
          "if": { "properties": { "format": { "const": "sui" } }, "required": ["format"] },
          "then": { "properties": { "value": { "pattern": "^0x[0-9a-f]{64}$" } } }
        },
        {
          "if": { "properties": { "format": { "const": "tron" } }, "required": ["format"] },
          "then": { "properties": { "value": { "pattern": "^T[1-9A-HJ-NP-Za-km-z]{33}$" } } }
        }
      ],
      "description": "A blockchain address with its format. Known formats are pattern-validated; unknown formats are accepted to allow extensibility."
    },
    "rate": {
      "type": "object",
      "required": ["value", "unit"],
      "properties": {
        "value": {
          "type": "number",
          "description": "The numeric rate value."
        },
        "unit": {
          "type": "string",
          "enum": ["bps", "percent"],
          "description": "The unit of the rate: bps (basis points) or percent."
        }
      },
      "additionalProperties": false,
      "description": "A rate or spread value with an explicit unit."
    },
    "amount": {
      "type": "object",
      "required": ["value", "currency"],
      "properties": {
        "value": {
          "type": "number",
          "description": "The numeric amount."
        },
        "currency": {
          "type": "string",
          "description": "ISO 4217 currency code or well-known token symbol (e.g., USD, USDC, ETH)."
        }
      },
      "additionalProperties": false,
      "description": "A monetary amount with a currency denomination."
    },
    "duration": {
      "type": "object",
      "required": ["value", "unit"],
      "properties": {
        "value": {
          "type": "number",
          "description": "The numeric duration value."
        },
        "unit": {
          "type": "string",
          "enum": ["months", "days", "hours", "seconds"],
          "description": "The unit of the duration."
        }
      },
      "additionalProperties": false,
      "description": "A time duration with an explicit unit."
    },
    "date": {
      "type": "string",
      "pattern": "^\\d{4}-\\d{2}-\\d{2}$",
      "description": "An ISO 8601 date string (YYYY-MM-DD)."
    },
    "chain": {
      "type": "string",
      "pattern": "^[a-z][a-z0-9_-]*$",
      "description": "A lowercase blockchain network identifier (e.g., ethereum, base, arbitrum, solana)."
    },
    "metadata": {
      "type": "object",
      "required": ["id", "name", "kind"],
      "properties": {
        "id": {
          "type": "string",
          "pattern": "^[a-z0-9]+(-[a-z0-9]+)*$",
          "description": "Unique kebab-case identifier for this file within its repository."
        },
        "name": {
          "type": "string",
          "description": "Human-readable display name."
        },
        "kind": {
          "type": "string",
          "pattern": "^[a-z][a-z0-9]*(\\.[a-z][a-z0-9-]*){2,}$",
          "description": "Reverse-domain kind identifier with at least three dot-separated segments (e.g., io.denna.defi.star-config, io.sky.star.config)."
        },
        "description": {
          "type": "string",
          "description": "Brief description of the file contents."
        },
        "version": {
          "type": "string",
          "pattern": "^\\d+\\.\\d+\\.\\d+",
          "description": "Semantic version of the data."
        },
        "lastUpdated": {
          "$ref": "#/$defs/date",
          "description": "ISO 8601 date when the data was last verified or updated."
        },
        "tags": {
          "type": "array",
          "items": { "type": "string" },
          "description": "Freeform tags for categorization and filtering."
        },
        "source": {
          "type": "object",
          "properties": {
            "repository": {
              "type": "string",
              "description": "Source repository name or URL."
            },
            "references": {
              "type": "array",
              "items": { "type": "string" },
              "description": "Source code references. SHOULD use file:line format (e.g., src/lib/constants.ts:17)."
            }
          },
          "additionalProperties": false,
          "description": "Provenance â€” where this data was derived from."
        }
      },
      "additionalProperties": false,
      "description": "Standard metadata block required in every Denna Spec file."
    }
  }
}
